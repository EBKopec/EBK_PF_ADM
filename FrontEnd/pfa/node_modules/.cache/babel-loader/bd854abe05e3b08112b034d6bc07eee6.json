{"ast":null,"code":"var _jsxFileName = \"E:\\\\Projetos\\\\Portal\\\\PF\\\\EBK_PF_Adm\\\\FrontEnd\\\\pfa\\\\src\\\\components\\\\pages\\\\body\\\\keepExt\\\\registerExts.js\";\n\n/* eslint-disable jsx-a11y/anchor-is-valid */\nimport React, { Component } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport Menu from \"../../menu/menu\";\nimport { Form, Container } from \"./styles\";\nimport Select from 'react-select';\nimport api from \"../../../services/api\";\nimport Groups from \"../../../utils/groups.json\"; // const groups = [\n//     { value: 2824, label: \"Prefeitura de Ponta Grossa - PMPG\" },\n//     { value: 2831, label: \"Prefeitura de Ponta Grossa - SME - ESCOLA\" },\n//     { value: 2832, label: \"Prefeitura de Ponta Grossa - SME - CMEI\" },\n//     { value: 2833, label: \"Prefeitura de Ponta Grossa - SMS - PAB\" },\n//     { value: 2834, label: \"Prefeitura de Ponta Grossa - SMS - FAE\" },\n//     { value: 2835, label: \"Prefeitura de Ponta Grossa - SMS - AIH\" },\n//     { value: 2855, label: \"Prefeitura de Ponta Grossa - SAMU\" },\n//     { value: 2857, label: \"Prefeitura de Ponta Grossa - BOMBEIROS\" }\n// ]\n\nclass KeepExts extends Component {\n  constructor() {\n    super();\n\n    this.componentDidMount = () => {\n      // console.log(\"Data\", this.state.data);\n      this.history();\n      this.pendentGroup();\n      this.local();\n    };\n\n    this.handleSubmit = async e => {\n      e.preventDefault();\n      const {\n        linha,\n        groupSelected,\n        tipo_linha,\n        data_envio_nova,\n        data_alteracao,\n        status\n      } = this.state; // console.log(`Validacao ${linha}, ${user_group_id.value}, ${tipo_linha}, ${data_envio_nova}, ${status}`)\n\n      if (!linha || !groupSelected || !tipo_linha || !data_envio_nova || !data_alteracao || !status) {\n        alert(\"Preencha todos os dados!\");\n      } else {\n        let user_group_id = groupSelected.value;\n\n        try {\n          // const post = \n          await api.post(\"/extensions/regext\", {\n            linha,\n            user_group_id,\n            tipo_linha,\n            data_envio_nova,\n            data_alteracao,\n            status\n          }); // const { data } = post;\n\n          alert('Ramal Cadastrado com Sucesso!');\n          this.props.history.push(\"/app/ramais\");\n          this.history(); // this.setState( state => ({info: [ data, ...state.info ]}));\n        } catch (err) {\n          console.log(err);\n          alert(\"Ocorreu um erro ao registrar o ramal\");\n        }\n      }\n    };\n\n    this.history = async e => {\n      const response = await api.get(`/extKeep/P`);\n      const {\n        data\n      } = response; // console.log('History', data);\n\n      this.setState({\n        info: data\n      });\n    };\n\n    this.groupChange = groupSelected => {\n      // const { user_group_id, ...data } = this.state;\n      // console.log('Estado ', data.linha);\n      this.setState({\n        groupSelected\n      });\n      console.log(`Group Selected: `, groupSelected);\n    };\n\n    this.localChange = localSelected => {\n      this.setState({\n        localSelected\n      });\n      console.log(`Local Selected: `, localSelected);\n    };\n\n    this.pendentGroup = () => {\n      let groups = [];\n      groups = Groups.groups.map(dt => {\n        return {\n          value: dt.value,\n          label: dt.label\n        };\n      });\n      this.setState({\n        groups: groups\n      });\n    };\n\n    this.local = async e => {\n      let locals = [];\n      const local = await api.get(`/localsetor`);\n      console.log(local);\n      locals = local.data.map(id_local => {\n        return {\n          value: id_local.id_local_setor,\n          label: id_local.Local_Setor\n        };\n      }); // console.log(\"Years\", ano);\n\n      this.setState({\n        locals: locals\n      });\n    };\n\n    this.state = {\n      linha: null,\n      user_group_id: null,\n      tipo_linha: null,\n      data_envio_nova: null,\n      data_alteracao: null,\n      status: null,\n      groups: null,\n      group: null,\n      groupSelected: null,\n      localSelected: null,\n      info: [],\n      data: null\n    };\n  }\n\n  render() {\n    const {\n      groups,\n      groupSelected,\n      locals,\n      localSelected,\n      info\n    } = this.state; // console.log(\"Info\", info, groupSelected);\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mainDiv\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"menu\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Menu, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }\n    }, \"Cadastrar Ramais\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"formExt\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 25\n      }\n    }, \"Ramal ou Linha\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      placeholder: \"Ramal ou Linha\",\n      onChange: e => this.setState({\n        linha: e.target.value\n      }),\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"a\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 25\n      }\n    }, \"Grupos\"), /*#__PURE__*/React.createElement(Select, {\n      className: \"selected\",\n      value: groupSelected,\n      onChange: this.groupChange,\n      options: groups,\n      maxMenuHeight: 150,\n      placeholder: \"Selecione o Grupo\",\n      isSearchable: true,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"a\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 25\n      }\n    }, \"Local\"), /*#__PURE__*/React.createElement(Select, {\n      className: \"selected\",\n      value: localSelected,\n      onChange: this.groupChange,\n      options: locals,\n      maxMenuHeight: 150,\n      placeholder: \"Selecione o Local\",\n      isSearchable: true,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"a\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 25\n      }\n    }, \"Tipo de Linha\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Tipo de Linha\",\n      onChange: e => this.setState({\n        tipo_linha: e.target.value\n      }),\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"a\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 25\n      }\n    }, \"Data de Cadastro\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"date\",\n      placeholder: \"Data de Cadastro\",\n      onChange: e => this.setState({\n        data_envio_nova: e.target.value\n      }),\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"a\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 25\n      }\n    }, \"Data de Altera\\xE7\\xE3o\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"date\",\n      placeholder: \"Data de Altera\\xE7\\xE3o\",\n      onChange: e => this.setState({\n        data_alteracao: e.target.value\n      }),\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"a\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 25\n      }\n    }, \"Status\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Status\",\n      pattern: \"[a-zA-Z]\",\n      title: \"N\\xFAmeros n\\xE3o s\\xE3o aceitos!\",\n      maxlength: \"1\",\n      onChange: e => this.setState({\n        status: e.target.value\n      }),\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 25\n      }\n    }, \"Registrar\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"groups\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 45\n      }\n    }, \"Ramal\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 45\n      }\n    }, \"Grupo\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 45\n      }\n    }, \"Tipo de Linha\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 45\n      }\n    }, \"Data de Cadastro\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 45\n      }\n    }, \"Status\"))), info.map(data => /*#__PURE__*/React.createElement(\"tbody\", {\n      key: data.linha,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 45\n      }\n    }, data.linha), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 45\n      }\n    }, data.Grupo), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 45\n      }\n    }, data.tipo_linha), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 45\n      }\n    }, data.data_envio_nova), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 45\n      }\n    }, data.status))))))))));\n  }\n\n}\n\nexport default withRouter(KeepExts);","map":{"version":3,"sources":["E:/Projetos/Portal/PF/EBK_PF_Adm/FrontEnd/pfa/src/components/pages/body/keepExt/registerExts.js"],"names":["React","Component","withRouter","Menu","Form","Container","Select","api","Groups","KeepExts","constructor","componentDidMount","history","pendentGroup","local","handleSubmit","e","preventDefault","linha","groupSelected","tipo_linha","data_envio_nova","data_alteracao","status","state","alert","user_group_id","value","post","props","push","err","console","log","response","get","data","setState","info","groupChange","localChange","localSelected","groups","map","dt","label","locals","id_local","id_local_setor","Local_Setor","group","render","target","Grupo"],"mappings":"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","sourcesContent":["/* eslint-disable jsx-a11y/anchor-is-valid */\r\nimport React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport Menu from \"../../menu/menu\";\r\nimport { Form, Container } from \"./styles\";\r\nimport Select from 'react-select';\r\nimport api from \"../../../services/api\";\r\nimport Groups from \"../../../utils/groups.json\";\r\n\r\n// const groups = [\r\n//     { value: 2824, label: \"Prefeitura de Ponta Grossa - PMPG\" },\r\n//     { value: 2831, label: \"Prefeitura de Ponta Grossa - SME - ESCOLA\" },\r\n//     { value: 2832, label: \"Prefeitura de Ponta Grossa - SME - CMEI\" },\r\n//     { value: 2833, label: \"Prefeitura de Ponta Grossa - SMS - PAB\" },\r\n//     { value: 2834, label: \"Prefeitura de Ponta Grossa - SMS - FAE\" },\r\n//     { value: 2835, label: \"Prefeitura de Ponta Grossa - SMS - AIH\" },\r\n//     { value: 2855, label: \"Prefeitura de Ponta Grossa - SAMU\" },\r\n//     { value: 2857, label: \"Prefeitura de Ponta Grossa - BOMBEIROS\" }\r\n// ]\r\n\r\nclass KeepExts extends Component {\r\n    constructor(){\r\n        super();\r\n        this.state ={\r\n            linha: null,\r\n            user_group_id: null,\r\n            tipo_linha: null,\r\n            data_envio_nova: null,\r\n            data_alteracao: null,\r\n            status: null,\r\n            groups: null,\r\n            group: null,\r\n            groupSelected: null,\r\n            localSelected: null,\r\n            info: [],\r\n            data: null,\r\n        };\r\n    }\r\n    componentDidMount = () => {\r\n        // console.log(\"Data\", this.state.data);\r\n        this.history();\r\n        this.pendentGroup();\r\n        this.local();\r\n    }\r\n\r\n    handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        const { linha, groupSelected, tipo_linha, data_envio_nova, data_alteracao, status} = this.state;\r\n        // console.log(`Validacao ${linha}, ${user_group_id.value}, ${tipo_linha}, ${data_envio_nova}, ${status}`)\r\n        if ( !linha || !groupSelected || !tipo_linha || !data_envio_nova || !data_alteracao || !status){\r\n            alert(\"Preencha todos os dados!\");\r\n        } else {\r\n            let user_group_id = groupSelected.value;\r\n            try {\r\n                // const post = \r\n                await api.post(\"/extensions/regext\", {linha, user_group_id, tipo_linha, data_envio_nova, data_alteracao, status});\r\n                // const { data } = post;\r\n                alert('Ramal Cadastrado com Sucesso!');\r\n                this.props.history.push(\"/app/ramais\");\r\n                this.history();\r\n                // this.setState( state => ({info: [ data, ...state.info ]}));\r\n                \r\n            } catch (err) {\r\n                console.log(err);\r\n                alert(\"Ocorreu um erro ao registrar o ramal\");\r\n            }\r\n        }\r\n    }\r\n\r\n    history = async (e) => {\r\n        const response = await api.get(`/extKeep/P`);\r\n        const {data} = response;\r\n        // console.log('History', data);\r\n        this.setState({info: data});\r\n    }\r\n\r\n    groupChange = groupSelected => {\r\n        // const { user_group_id, ...data } = this.state;\r\n        // console.log('Estado ', data.linha);\r\n        this.setState({ groupSelected });\r\n        console.log(`Group Selected: `, groupSelected );\r\n    };\r\n\r\n    localChange = localSelected => {\r\n        this.setState({localSelected});\r\n        console.log(`Local Selected: `, localSelected );\r\n    }\r\n\r\n    pendentGroup = () => {\r\n        let groups = [];\r\n        groups = Groups.groups.map((dt) => { return { value: dt.value, label: dt.label } })\r\n        this.setState({ groups: groups })\r\n    }\r\n\r\n    local = async (e) => {\r\n        let locals = [];\r\n\r\n        const local = await api.get(`/localsetor`);\r\n        console.log(local);\r\n        locals = local.data.map((id_local) => { return { value: id_local.id_local_setor, label: id_local.Local_Setor } });\r\n        // console.log(\"Years\", ano);\r\n        this.setState({ locals: locals });\r\n    }\r\n\r\n\r\n    render(){\r\n        const { groups, groupSelected, locals, localSelected, info } = this.state;\r\n        // console.log(\"Info\", info, groupSelected);\r\n        \r\n        return (\r\n            <div className=\"mainDiv\">\r\n                <div className=\"menu\">\r\n                    <Menu />\r\n                </div>\r\n                <p>Cadastrar Ramais</p>\r\n                <div className=\"formExt\">\r\n                    <Container>\r\n                        \r\n                        <Form onSubmit={this.handleSubmit}>\r\n                        <a>Ramal ou Linha</a>\r\n                        <input \r\n                            type=\"number\"\r\n                            placeholder=\"Ramal ou Linha\"\r\n                            onChange={ e => this.setState({ linha: e.target.value })}\r\n                            required\r\n                            />\r\n                        <a>Grupos</a>\r\n                        <Select\r\n                                className=\"selected\"\r\n                                value={groupSelected}\r\n                                onChange={this.groupChange}\r\n                                options={groups}\r\n                                maxMenuHeight={150}\r\n                                placeholder=\"Selecione o Grupo\"\r\n                                isSearchable \r\n                                required\r\n                                />\r\n                        <a>Local</a>\r\n                        <Select\r\n                                className=\"selected\"\r\n                                value={localSelected}\r\n                                onChange={this.groupChange}\r\n                                options={locals}\r\n                                maxMenuHeight={150}\r\n                                placeholder=\"Selecione o Local\"\r\n                                isSearchable \r\n                                required\r\n                                />\r\n                        <a>Tipo de Linha</a>\r\n                        <input \r\n                            type=\"text\"\r\n                            placeholder=\"Tipo de Linha\"\r\n                            onChange={ e => this.setState({ tipo_linha: e.target.value })}\r\n                            required\r\n                            />\r\n                        <a>Data de Cadastro</a>\r\n                        <input \r\n                            type=\"date\"\r\n                            placeholder=\"Data de Cadastro\"\r\n                            onChange={ e => this.setState({ data_envio_nova: e.target.value })}\r\n                            required\r\n                            />\r\n                        <a>Data de Alteração</a>\r\n                        <input \r\n                            type=\"date\"\r\n                            placeholder=\"Data de Alteração\"\r\n                            onChange={ e => this.setState({ data_alteracao: e.target.value })}\r\n                            required\r\n                        />\r\n                        <a>Status</a>\r\n                        <input \r\n                            type=\"text\"\r\n                            placeholder=\"Status\"\r\n                            pattern=\"[a-zA-Z]\"\r\n                            title=\"Números não são aceitos!\"\r\n                            maxlength=\"1\"\r\n                            onChange={ e => this.setState({ status: e.target.value })}\r\n                            required\r\n                            />\r\n                        <button type=\"submit\">Registrar</button>\r\n                        </Form>\r\n                        \r\n                        <div className=\"groups\">\r\n                            <div className=\"table\">\r\n                                <table>\r\n                                    <thead>\r\n                                        <tr>\r\n                                            <th>Ramal</th>\r\n                                            <th>Grupo</th>\r\n                                            <th>Tipo de Linha</th>\r\n                                            <th>Data de Cadastro</th>\r\n                                            <th>Status</th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    {info.map(data => (\r\n                                    <tbody key={data.linha}>\r\n                                        <tr>\r\n                                            <td>{data.linha}</td>\r\n                                            <td>{data.Grupo}</td>\r\n                                            <td>{data.tipo_linha}</td>\r\n                                            <td>{data.data_envio_nova}</td>\r\n                                            <td>{data.status}</td>\r\n                                        </tr>\r\n                                    </tbody>\r\n                                    ))}\r\n                                </table>\r\n\r\n                            </div>\r\n                            \r\n                        </div>\r\n                        </Container>\r\n                </div>\r\n            </div>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(KeepExts);"]},"metadata":{},"sourceType":"module"}