{"ast":null,"code":"var _jsxFileName = \"E:\\\\Projetos\\\\Portal\\\\PF\\\\EBK_PF_Adm\\\\FrontEnd\\\\pfa\\\\src\\\\components\\\\pages\\\\body\\\\keepFare\\\\keepFares.js\";\n\n/* eslint-disable jsx-a11y/anchor-is-valid */\nimport React, { Component } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport Menu from \"../../menu/menu\";\nimport { Form, Container } from \"./styles\";\nimport Select from 'react-select';\nimport api from \"../../../services/api\";\nimport Groups from \"../../../utils/groups.json\";\n\nclass keepFares extends Component {\n  constructor() {\n    super();\n\n    this.componentDidMount = () => {\n      // console.log(\"Data\", this.state.data);\n      this.pendentGroup();\n      this.typeCall();\n    };\n\n    this.handleSubmit = async e => {\n      e.preventDefault();\n      const {\n        groupSelected,\n        typeSelected,\n        CUSTO,\n        DATA_ALTERACAO,\n        FRANQUIA_MIN,\n        FRANQUIA_VALOR,\n        VALOR_RAMAL,\n        BATCH_ID\n      } = this.state; // console.log(`Validacao ${linha}, ${user_group_id.value}, ${tipo_linha}, ${data_envio_nova}, ${status}`)\n\n      if (!groupSelected || !typeSelected || !CUSTO || !DATA_ALTERACAO || !FRANQUIA_MIN || !FRANQUIA_VALOR || !VALOR_RAMAL || !BATCH_ID) {\n        alert(\"Preencha todos os dados!\");\n      } else {\n        let USER_ID = groupSelected.value;\n        let TIPO_ID = typeSelected.value;\n\n        try {\n          // const post = \n          await api.post(\"/fares/regfare\", {\n            USER_ID,\n            TIPO_ID,\n            CUSTO,\n            DATA_ALTERACAO,\n            FRANQUIA_MIN,\n            FRANQUIA_VALOR,\n            VALOR_RAMAL,\n            BATCH_ID\n          }); // const { data } = post;\n\n          alert('Tarifa Cadastrada com Sucesso!');\n          this.props.history.push(\"/app/tarifas\");\n          window.location.reload(); // this.setState( state => ({info: [ data, ...state.info ]}));\n        } catch (err) {\n          console.log(err);\n          alert(\"Ocorreu um erro ao registrar o ramal\");\n        }\n      }\n    };\n\n    this.groupChange = groupSelected => {\n      // const { user_group_id, ...data } = this.state;\n      // console.log('Estado ', data.linha);\n      this.setState({\n        groupSelected\n      });\n      console.log(`Group Selected: `, groupSelected);\n    };\n\n    this.pendentGroup = () => {\n      let groups = [];\n      groups = Groups.groups.map(dt => {\n        return {\n          value: dt.value,\n          label: dt.label\n        };\n      });\n      this.setState({\n        groups: groups\n      });\n    };\n\n    this.typeChange = typeSelected => {\n      this.setState({\n        typeSelected\n      });\n      console.log(`Type Selected: `, typeSelected);\n    };\n\n    this.typeCall = async () => {\n      let types = [];\n      const response = await api.get(`/type`);\n      const {\n        data\n      } = response;\n      types = data.map(tp => {\n        return {\n          value: tp.ID,\n          label: tp.TIPO\n        };\n      });\n      this.setState({\n        types\n      });\n    };\n\n    this.state = {\n      linha: null,\n      user_group_id: null,\n      tipo_linha: null,\n      data_envio_nova: null,\n      data_alteracao: null,\n      status: null,\n      groups: null,\n      group: null,\n      typeSelected: null,\n      groupSelected: null,\n      types: null,\n      data: null\n    };\n  }\n\n  render() {\n    const {\n      groups,\n      groupSelected,\n      typeSelected,\n      types\n    } = this.state; // console.log(\"Info\", info, groupSelected);\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mainDiv\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"menu\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Menu, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }\n    }, \"Manter Tarifas\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"formExt\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 29\n      }\n    }, \"Grupos\"), /*#__PURE__*/React.createElement(Select, {\n      className: \"selected\",\n      value: groupSelected,\n      onChange: this.groupChange,\n      options: groups,\n      maxMenuHeight: 150,\n      placeholder: \"Selecione o Grupo\",\n      isSearchable: true,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"a\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 29\n      }\n    }, \"Tipo Tarifa\"), /*#__PURE__*/React.createElement(Select, {\n      className: \"selected\",\n      value: typeSelected,\n      onChange: this.typeChange,\n      options: types,\n      maxMenuHeight: 150,\n      placeholder: \"Selecione o Tipo de liga\\xE7\\xE3o\",\n      isSearchable: true,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"a\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 29\n      }\n    }, \"Custo\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      placeholder: \"Custo\",\n      onChange: e => this.setState({\n        CUSTO: e.target.value\n      }),\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"a\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 29\n      }\n    }, \"Franquia Minutos\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      placeholder: \"Franquia Minutos\",\n      onChange: e => this.setState({\n        DATA_ALTERACAO: e.target.value\n      }),\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"a\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 29\n      }\n    }, \"Franquia Valor\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      placeholder: \"Franquia Valor\",\n      onChange: e => this.setState({\n        FRANQUIA_MIN: e.target.value\n      }),\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"a\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 29\n      }\n    }, \"Valor Ramal\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      min: \"0.01\",\n      step: \"0.01\",\n      max: \"2500\",\n      placeholder: \"Valor Ramal\",\n      onChange: e => this.setState({\n        VALOR_RAMAL: e.target.value\n      }),\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"a\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 29\n      }\n    }, \"Batch\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      placeholder: \"Batch\",\n      onChange: e => this.setState({\n        BATCH_ID: e.target.value\n      }),\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 29\n      }\n    }, \"Registrar\")))));\n  }\n\n}\n\nexport default withRouter(keepFares);","map":{"version":3,"sources":["E:/Projetos/Portal/PF/EBK_PF_Adm/FrontEnd/pfa/src/components/pages/body/keepFare/keepFares.js"],"names":["React","Component","withRouter","Menu","Form","Container","Select","api","Groups","keepFares","constructor","componentDidMount","pendentGroup","typeCall","handleSubmit","e","preventDefault","groupSelected","typeSelected","CUSTO","DATA_ALTERACAO","FRANQUIA_MIN","FRANQUIA_VALOR","VALOR_RAMAL","BATCH_ID","state","alert","USER_ID","value","TIPO_ID","post","props","history","push","window","location","reload","err","console","log","groupChange","setState","groups","map","dt","label","typeChange","types","response","get","data","tp","ID","TIPO","linha","user_group_id","tipo_linha","data_envio_nova","data_alteracao","status","group","render","target"],"mappings":"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","sourcesContent":["/* eslint-disable jsx-a11y/anchor-is-valid */\r\nimport React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport Menu from \"../../menu/menu\";\r\nimport { Form, Container } from \"./styles\";\r\nimport Select from 'react-select';\r\nimport api from \"../../../services/api\";\r\nimport Groups from \"../../../utils/groups.json\";\r\n\r\n\r\nclass keepFares extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            linha: null,\r\n            user_group_id: null,\r\n            tipo_linha: null,\r\n            data_envio_nova: null,\r\n            data_alteracao: null,\r\n            status: null,\r\n            groups: null,\r\n            group: null,\r\n            typeSelected: null,\r\n            groupSelected: null,\r\n            types: null,\r\n            data: null,\r\n        };\r\n    }\r\n    componentDidMount = () => {\r\n        // console.log(\"Data\", this.state.data);\r\n        this.pendentGroup();\r\n        this.typeCall();\r\n    }\r\n\r\n    handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        const { groupSelected, typeSelected, CUSTO, DATA_ALTERACAO, FRANQUIA_MIN, FRANQUIA_VALOR, VALOR_RAMAL, BATCH_ID } = this.state;\r\n        // console.log(`Validacao ${linha}, ${user_group_id.value}, ${tipo_linha}, ${data_envio_nova}, ${status}`)\r\n        if (!groupSelected || !typeSelected || !CUSTO || !DATA_ALTERACAO || !FRANQUIA_MIN || !FRANQUIA_VALOR || !VALOR_RAMAL || !BATCH_ID ) {\r\n            alert(\"Preencha todos os dados!\");\r\n        } else {\r\n            let USER_ID = groupSelected.value;\r\n            let TIPO_ID = typeSelected.value;\r\n            try {\r\n                // const post = \r\n                await api.post(\"/fares/regfare\", { USER_ID, TIPO_ID, CUSTO, DATA_ALTERACAO, FRANQUIA_MIN, FRANQUIA_VALOR, VALOR_RAMAL, BATCH_ID });\r\n                // const { data } = post;\r\n                alert('Tarifa Cadastrada com Sucesso!');\r\n                this.props.history.push(\"/app/tarifas\");\r\n                window.location.reload()\r\n                // this.setState( state => ({info: [ data, ...state.info ]}));\r\n\r\n            } catch (err) {\r\n                console.log(err);\r\n                alert(\"Ocorreu um erro ao registrar o ramal\");\r\n            }\r\n        }\r\n    }\r\n\r\n    groupChange = groupSelected => {\r\n        // const { user_group_id, ...data } = this.state;\r\n        // console.log('Estado ', data.linha);\r\n        this.setState({ groupSelected });\r\n        console.log(`Group Selected: `, groupSelected);\r\n    };\r\n\r\n    pendentGroup = () => {\r\n        let groups = [];\r\n        groups = Groups.groups.map((dt) => { return { value: dt.value, label: dt.label } })\r\n        this.setState({ groups: groups })\r\n    }\r\n\r\n    typeChange = typeSelected => {\r\n        this.setState({typeSelected});\r\n        console.log(`Type Selected: `, typeSelected);\r\n    }\r\n\r\n    typeCall = async () => {\r\n        let types = [];\r\n        const response = await api.get(`/type`);\r\n        const { data } = response;\r\n        types = data.map((tp) => {return {value:tp.ID, label: tp.TIPO}});\r\n        this.setState({types})\r\n    }\r\n\r\n\r\n    render() {\r\n        const { groups, groupSelected, typeSelected, types } = this.state;\r\n        // console.log(\"Info\", info, groupSelected);\r\n\r\n        return (\r\n            <div className=\"mainDiv\">\r\n                <div className=\"menu\">\r\n                    <Menu />\r\n                </div>\r\n                <p>Manter Tarifas</p>\r\n                <div className=\"formExt\">\r\n                    <Container>\r\n\r\n                        <Form onSubmit={this.handleSubmit}>\r\n                            <a>Grupos</a>\r\n                            <Select\r\n                                className=\"selected\"\r\n                                value={groupSelected}\r\n                                onChange={this.groupChange}\r\n                                options={groups}\r\n                                maxMenuHeight={150}\r\n                                placeholder=\"Selecione o Grupo\"\r\n                                isSearchable\r\n                                required\r\n                            />\r\n                            <a>Tipo Tarifa</a>\r\n                            <Select\r\n                                className=\"selected\"\r\n                                value={typeSelected}\r\n                                onChange={this.typeChange}\r\n                                options={types}\r\n                                maxMenuHeight={150}\r\n                                placeholder=\"Selecione o Tipo de ligação\"\r\n                                isSearchable\r\n                                required\r\n                            />\r\n                            <a>Custo</a>\r\n                            <input\r\n                                type=\"number\"\r\n                                placeholder=\"Custo\"\r\n                                onChange={e => this.setState({ CUSTO: e.target.value })}\r\n                                required\r\n                            />\r\n                            <a>Franquia Minutos</a>\r\n                            <input\r\n                                type=\"number\"\r\n                                placeholder=\"Franquia Minutos\"\r\n                                onChange={e => this.setState({ DATA_ALTERACAO: e.target.value })}\r\n                                required\r\n                            />\r\n                            <a>Franquia Valor</a>\r\n                            <input\r\n                                type=\"number\"\r\n                                placeholder=\"Franquia Valor\"\r\n                                onChange={e => this.setState({ FRANQUIA_MIN: e.target.value })}\r\n                                required\r\n                            />\r\n                            <a>Valor Ramal</a>\r\n                            <input\r\n                                type=\"number\"\r\n                                min=\"0.01\" step=\"0.01\" max=\"2500\"\r\n                                placeholder=\"Valor Ramal\"\r\n                                onChange={e => this.setState({ VALOR_RAMAL: e.target.value })}\r\n                                required\r\n                            />\r\n                            <a>Batch</a>\r\n                            <input\r\n                                type=\"number\"\r\n                                placeholder=\"Batch\"\r\n                                onChange={e => this.setState({ BATCH_ID: e.target.value })}\r\n                                required\r\n                            />\r\n                            <button type=\"submit\">Registrar</button>\r\n                        </Form>\r\n                    </Container>\r\n                </div>\r\n            </div>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(keepFares);"]},"metadata":{},"sourceType":"module"}